<section class="violet" data-type="chapter">
<header>
  <div class="icon"><img src="../images/sections/02/coffee.png" /></div>
  <p>Chapter 2</p>
  <h1 id="about-data-aggregation">About Data Aggregation</h1>
  <p data-type="author">By Alistair Croll</p>
</header>

<section class="id" data-type="sect1">
<p>When trying to turn data into information, the data you start with matter a lot. Data can be simple factoids&mdash;of which someone else has done all of the analysis&mdash;or raw transactions, where the exploration is left entirely to the user.</p>

<figure><img alt="Raw vs. Aggregated Data" src="../images/sections/02/raw-vs-aggregated.png" /></figure>

<table>
	<tbody>
		<tr>
			<th>Level of Aggregation</th>
			<th>Number of metrics</th>
			<th>Description</th>
		</tr>
		<tr>
			<td>Factoid</td>
			<td>Maximum context</td>
			<td>Single data point; No drill-down</td>
		</tr>
		<tr>
			<td>Series</td>
			<td>One metric, across an axis</td>
			<td>Can compare rate of change</td>
		</tr>
		<tr>
			<td>Multiseries</td>
			<td>Several metrics, common axis</td>
			<td>Can compare rate of change, correlation between metrics</td>
		</tr>
		<tr>
			<td>Summable multiseries</td>
			<td>Several metrics, common axis</td>
			<td>Can compare rate of change, correlation between metrics; Can compare percentages to whole</td>
		</tr>
		<tr>
			<td>Summary records</td>
			<td>One record for each item in a series; Metrics in other series have been aggregated somehow</td>
			<td>Items can be compared</td>
		</tr>
		<tr>
			<td>Individual transactions</td>
			<td>One record per instance</td>
			<td>No aggregation or combination; Maximum drill-down</td>
		</tr>
	</tbody>
</table>

<p>Most datasets fall somewhere in the middle of these levels of aggregation. If we know what kind of <a class="glossterm" href="glossary01.html#data" target="_blank">data</a> we have to begin with, we can greatly simplify the task of correctly visualizing them the first time around.</p>

<p>Let&rsquo;s look at these types of aggregation one by one, using the example of coffee consumption. Let&rsquo;s assume a caf&eacute; tracks each cup of coffee sold and records two pieces of information about the sale: the gender of the buyer and the kind of coffee (regular, decaf, or mocha).</p>

<p>The basic table of these data, by year, looks like this<span data-type="footnote">These are completely made up coffee data, BTW.</span>:</p>

<table class="custom">
	<tbody>
		<tr>
			<th>Year</th>
			<th>2000</th>
			<th>2001</th>
			<th>2002</th>
			<th>2003</th>
			<th>2004</th>
			<th>2005</th>
			<th>2006</th>
			<th>2007</th>
			<th>2008</th>
		</tr>
		<tr class="highlight">
			<td>Total sales</td>
			<td>19,795</td>
			<td>23,005</td>
			<td>31,711</td>
			<td>40,728</td>
			<td>50,440</td>
			<td>60,953</td>
			<td>74,143</td>
			<td>93,321</td>
			<td>120,312</td>
		</tr>
		<tr>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
		</tr>
		<tr class="highlight">
			<td>Male</td>
			<td>12,534</td>
			<td>16,452</td>
			<td>19,362</td>
			<td>24,726</td>
			<td>28,567</td>
			<td>31,110</td>
			<td>39,001</td>
			<td>48,710</td>
			<td>61,291</td>
		</tr>
		<tr class="highlight">
			<td>Female</td>
			<td>7,261</td>
			<td>6,553</td>
			<td>12,349</td>
			<td>16,002</td>
			<td>21,873</td>
			<td>29,843</td>
			<td>35,142</td>
			<td>44,611</td>
			<td>59,021</td>
		</tr>
		<tr>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
			<td> </td>
		</tr>
		<tr class="highlight">
			<td>Regular</td>
			<td>9,929</td>
			<td>14,021</td>
			<td>17,364</td>
			<td>20,035</td>
			<td>27,854</td>
			<td>34,201</td>
			<td>36,472</td>
			<td>52,012</td>
			<td>60,362</td>
		</tr>
		<tr class="highlight">
			<td>Decaf</td>
			<td>6,744</td>
			<td>6,833</td>
			<td>10,201</td>
			<td>13,462</td>
			<td>17,033</td>
			<td>19,921</td>
			<td>21,094</td>
			<td>23,716</td>
			<td>38,657</td>
		</tr>
		<tr class="highlight">
			<td>Mocha</td>
			<td>3,122</td>
			<td>2,151</td>
			<td>4,146</td>
			<td>7,231</td>
			<td>5,553</td>
			<td>6,831</td>
			<td>16,577</td>
			<td>17,593</td>
			<td>21,293</td>
		</tr>
	</tbody>
</table>

<h2>Factoid</h2>

<p>A <a class="glossterm" href="glossary01.html#factoid" target="_blank">factoid</a> is a piece of trivia. It is calculated from source data, but chosen to emphasize a particular point.</p>

<div data-type="example">
<p><strong>Example:</strong> 36.7% of coffee in 2000 was consumed by women.</p>
</div>

<h2>Series</h2>

<p>This is one type of information (the <a class="glossterm " href="glossary01.html#variable-dependent" target="_blank">dependent variable</a>) compared to another (the <a class="glossterm" href="glossary01.html#variable-independent" target="_blank">independent variable</a>). Often, the independent variable is time.</p>

<table>
	<tbody>
		<tr>
			<th>Year</th>
			<th>2000</th>
			<th>2001</th>
			<th>2002</th>
			<th>2003</th>
		</tr>
		<tr>
			<td>Total sales</td>
			<td>19,795</td>
			<td>23,005</td>
			<td>31,711</td>
			<td>40,728</td>
		</tr>
	</tbody>
</table>

<p>In this example, the total sales of coffee <em>depends</em> on the year. That is, the year is independent (&ldquo;pick a year, any year&rdquo;) and the sales is dependent (&ldquo;based on that year, the consumption is 23,005 cups&rdquo;).</p>

<p>A series can also be some other set of continuous data, such as temperature. Consider this table that shows how long it takes for an adult to sustain a first-degree burn from hot water. Here, water temperature is the independent variable<span class="footnote" contenteditable="false" data-type="footnote">US Government Memorandum, Consumer Product Safety Commission, Peter L. Armstrong, Sept. 15, 1978.</span>:</p>

<table>
	<tbody>
		<tr>
			<th>Water Temp &deg;C (&deg;F)</th>
			<th>Time for 1st Degree Burn</th>
		</tr>
		<tr>
			<td>46.7 (116)</td>
			<td>35 minutes</td>
		</tr>
		<tr>
			<td>50 (122)</td>
			<td>1 minute</td>
		</tr>
		<tr>
			<td>55 (131)</td>
			<td>5 seconds</td>
		</tr>
		<tr>
			<td>60 (140)</td>
			<td>2 seconds</td>
		</tr>
		<tr>
			<td>65 (149)</td>
			<td>1 second</td>
		</tr>
		<tr>
			<td>67.8 (154)</td>
			<td>Instantaneous</td>
		</tr>
	</tbody>
</table>

<p>And it can be a <a class="glossterm " href="glossary01.html#series" target="_blank">series</a> of non-contiguous, but related, information in a category, such as major car brands, types of dog, vegetables, or the mass of planets in the solar system<span contenteditable="false" data-type="footnote">National Space Science Data Center, NASA: http://nssdc.gsfc.nasa.gov/planetary/factsheet/planet_table_ratio.html</span>:</p>

<table>
	<tbody>
		<tr>
			<th>Planet</th>
			<th>Mass relative to earth</th>
		</tr>
		<tr>
			<td>Mercury</td>
			<td>0.0553</td>
		</tr>
		<tr>
			<td>Venus</td>
			<td>0.815</td>
		</tr>
		<tr>
			<td>Earth</td>
			<td>1</td>
		</tr>
		<tr>
			<td>Mars</td>
			<td>0.107</td>
		</tr>
		<tr>
			<td>Jupiter</td>
			<td>317.8</td>
		</tr>
		<tr>
			<td>Saturn</td>
			<td>95.2</td>
		</tr>
		<tr>
			<td>Uranus</td>
			<td>14.5</td>
		</tr>
		<tr>
			<td>Neptune</td>
			<td>17.1</td>
		</tr>
	</tbody>
</table>

<p>In many cases, series data have one and only one dependent variable for each independent variable. In other words, there is only one number for coffee consumption for each year on record. This is usually displayed as a <a class="glossterm " href="glossary01.html#graph-bar" target="_blank">bar</a>, <a class="glossterm " href="glossary01.html#graph-series" target="_blank">time series</a>, or column graph.</p>

<figure><img alt="Total sales" src="../images/sections/02/total-sales.png" /></figure>

<p>In cases where there are several dependent variables for each independent one, we often show the information as a <a class="glossterm" href="glossary01.html#plot-scatter" target="_blank">scatterplot</a> or <a class="glossterm " href="glossary01.html#map-heat" target="_blank">heat map</a>, or do some kind of processing (such as an average) to simplify what&rsquo;s shown. We&rsquo;ll come back to this in the section below, <em>Using visualization to reveal underlying variance</em>.</p>

<h2>Multiseries</h2>

<p>A <a class="glossterm " href="glossary01.html#series-multiseries" target="_blank">multiseries</a> dataset has several pieces of dependent information and one piece of independent information. Here are the data about exposure to hot water from before, with additional data<span contenteditable="false" data-type="footnote">US Government Memorandum, Consumer Product Safety Commission, Peter L. Armstrong, Sept. 15, 1978.</span>:</p>

<table>
	<tbody>
		<tr>
			<th>Water Temp &deg;C (&deg;F)</th>
			<th>Time for 1st Degree Burn</th>
			<th>Time for 2nd &amp; 3rd Degree Burns</th>
		</tr>
		<tr>
			<td>46.7 (116)</td>
			<td>35 minutes</td>
			<td>45 minutes</td>
		</tr>
		<tr>
			<td>50 (122)</td>
			<td>1 minute</td>
			<td>5 minutes</td>
		</tr>
		<tr>
			<td>55 (131)</td>
			<td>5 seconds</td>
			<td>25 seconds</td>
		</tr>
		<tr>
			<td>60 (140)</td>
			<td>2 seconds</td>
			<td>5 seconds</td>
		</tr>
		<tr>
			<td>65 (149)</td>
			<td>1 second</td>
			<td>2 seconds</td>
		</tr>
		<tr>
			<td>67.8 (154)</td>
			<td>Instantaneous</td>
			<td>1 second</td>
		</tr>
	</tbody>
</table>

<p>Or, returning to our coffee example, we might have several series:</p>

<table>
	<tbody>
		<tr>
			<th>Year</th>
			<th>2000</th>
			<th>2001</th>
			<th>2002</th>
			<th>2003</th>
			<th>2004</th>
			<th>2005</th>
		</tr>
		<tr>
			<td>Male</td>
			<td>12,534</td>
			<td>16,452</td>
			<td>19,362</td>
			<td>24,726</td>
			<td>28,567</td>
			<td>31,110</td>
		</tr>
		<tr>
			<td>Regular</td>
			<td>9,929</td>
			<td>14,021</td>
			<td>17,364</td>
			<td>20,035</td>
			<td>27,854</td>
			<td>34,201</td>
		</tr>
	</tbody>
</table>

<p>With this dataset, we know several things about 2001. We know that 16,452 cups were served to men and that 14,021 cups served were regular coffee (with caffeine, cream or milk, and sugar).</p>

<p>We don&rsquo;t, however, know how to combine these in useful ways: they aren&rsquo;t related. We can&rsquo;t tell what percentage of regular coffee was sold to men or how many cups were served to women.</p>

<p>In other words, multiseries data are simply several series on one chart or table. We can show them together, but we can&rsquo;t meaningfully stack or combine them.</p>

<figure><img alt="Line chart, Male and Regular Coffee" src="../images/sections/02/regular-male.png" /></figure>

<h2>Summable Multiseries</h2>

<p>As the name suggests, a <a class="glossterm " href="glossary01.html#series-summable-multiseries" target="_blank">summable multiseries</a> is a particular statistic (gender, type of coffee) segmented into subgroups.</p>

<table>
	<tbody>
		<tr>
			<th>Year</th>
			<th>2000</th>
			<th>2001</th>
			<th>2002</th>
			<th>2003</th>
			<th>2004</th>
			<th>2005</th>
			<th>2006</th>
			<th>2007</th>
			<th>2008</th>
		</tr>
		<tr>
			<td>Male</td>
			<td>12534</td>
			<td>16452</td>
			<td>19362</td>
			<td>24726</td>
			<td>28567</td>
			<td>31110</td>
			<td>39001</td>
			<td>48710</td>
			<td>61291</td>
		</tr>
		<tr>
			<td>Female</td>
			<td>7261</td>
			<td>6553</td>
			<td>12349</td>
			<td>16002</td>
			<td>21873</td>
			<td>29843</td>
			<td>35142</td>
			<td>44611</td>
			<td>59021</td>
		</tr>
	</tbody>
</table>

<p>Because we know a coffee drinker is either male or female, we can add these together to make broader observations about total consumption. For one thing, we can display percentages.</p>

<figure><img alt="Pie chart, Coffee consumption by gender in 2001" src="../images/sections/02/coffee-gender.png" /></figure>

<p>Additionally, we can stack segments to reveal a whole:</p>

<figure><img alt="Area chart, Total coffee consumption by gender" src="../images/sections/02/total-coffee-by-gender.png" /></figure>

<p>One challenge with summable multiseries data is knowing which series go together. Consider the following:</p>

<table>
	<tbody>
		<tr>
			<th>Year</th>
			<th>2000</th>
			<th>2001</th>
			<th>2002</th>
			<th>2003</th>
			<th>2004</th>
		</tr>
		<tr>
			<td>Male</td>
			<td>12534</td>
			<td>16452</td>
			<td>19362</td>
			<td>24726</td>
			<td>28567</td>
		</tr>
		<tr>
			<td>Female</td>
			<td>7261</td>
			<td>6553</td>
			<td>12349</td>
			<td>16002</td>
			<td>21873</td>
		</tr>
		<tr>
			<td>Regular</td>
			<td>9929</td>
			<td>14021</td>
			<td>17364</td>
			<td>20035</td>
			<td>27854</td>
		</tr>
		<tr>
			<td>Decaf</td>
			<td>6744</td>
			<td>6833</td>
			<td>10201</td>
			<td>13462</td>
			<td>17033</td>
		</tr>
		<tr>
			<td>Mocha</td>
			<td>3122</td>
			<td>2151</td>
			<td>4146</td>
			<td>7231</td>
			<td>5553</td>
		</tr>
	</tbody>
</table>

<p>There is nothing inherent in these data that tells us how we can combine information. It takes human understanding of data categories to know that <em>Male + Female = a complete set</em> and <em>Regular + Decaf + Mocha = a complete set</em>. Without this knowledge, we can&rsquo;t combine the data, or worse, we might combine it incorrectly.</p>

<div data-type="warning">
<h3>It&rsquo;s Hard to Explore Summarized Data</h3>

<p>Even if we know the meaning of these data and realize they are two separate multiseries tables (one on gender and one on coffee type) we can&rsquo;t explore them deeply. For example, we can&rsquo;t find out how many women drank regular coffee in 2000.</p>

<p>This is a common (and important) mistake. Many people are tempted to say:</p>

<ul>
	<li>36.7% of cups sold in 2000 were sold to women.</li>
	<li>And there were 9,929 cups of regular sold in 2000.</li>
	<li>Therefore, 3,642.5 cups of regular were sold to women.</li>
</ul>

<p>But this is wrong. This type of inference can only be made when you know that one category (coffee type) is evenly distributed across another (gender). The fact that the result isn&rsquo;t even a whole number reminds us not to do this, as nobody was served a half cup.</p>

<p>The only way to truly explore the data and ask new questions (such as &ldquo;How many cups of regular were sold to women in 2000?&rdquo;) is to have the raw data. And then it&rsquo;s a matter of knowing how to aggregate them appropriately.</p>
</div>

<h2>Summary Records</h2>

<p>The following table of <a class="glossterm" href="glossary01.html#record-summary" target="_blank">summary records</a> looks like the kind of data a point-of-sale system at a caf&eacute; might generate. It includes a column of categorical information (gender, where there are two possible types) and subtotals for each type of coffee. It also includes the totals by the cup for those types.</p>

<table>
	<tbody>
		<tr>
			<th>Name</th>
			<th>Gender</th>
			<th>Regular</th>
			<th>Decaf</th>
			<th>Mocha</th>
			<th>Total</th>
		</tr>
		<tr>
			<td>Bob Smith</td>
			<td>M</td>
			<td>2</td>
			<td>3</td>
			<td>1</td>
			<td>6</td>
		</tr>
		<tr>
			<td>Jane Doe</td>
			<td>F</td>
			<td>4</td>
			<td>0</td>
			<td>0</td>
			<td>4</td>
		</tr>
		<tr>
			<td>Dale Cooper</td>
			<td>M</td>
			<td>1</td>
			<td>2</td>
			<td>4</td>
			<td>7</td>
		</tr>
		<tr>
			<td>Mary Brewer</td>
			<td>F</td>
			<td>3</td>
			<td>1</td>
			<td>0</td>
			<td>4</td>
		</tr>
		<tr>
			<td>Betty Kona</td>
			<td>F</td>
			<td>1</td>
			<td>0</td>
			<td>0</td>
			<td>1</td>
		</tr>
		<tr>
			<td>John Java</td>
			<td>M</td>
			<td>2</td>
			<td>1</td>
			<td>3</td>
			<td>6</td>
		</tr>
		<tr>
			<td>Bill Bean</td>
			<td>M</td>
			<td>3</td>
			<td>1</td>
			<td>0</td>
			<td>4</td>
		</tr>
		<tr>
			<td>Jake Beatnik</td>
			<td>M</td>
			<td>0</td>
			<td>0</td>
			<td>1</td>
			<td>1</td>
		</tr>
		<tr class="custom extra-highlight">
			<td>Totals</td>
			<td>5M, 3F</td>
			<td>16</td>
			<td>8</td>
			<td>9</td>
			<td>33</td>
		</tr>
	</tbody>
</table>

<p>This kind of table is familiar to anyone who&rsquo;s done basic exploration in a tool like Excel. We can do subcalculations:</p>

<ul>
	<li>There are 5 male drinkers and 3 female drinkers</li>
	<li>There were 16 regulars, 8 decafs, and 9 mochas</li>
	<li>We sold a total of 33 cups</li>
</ul>

<p>But more importantly, we can combine categories of data to ask more exploratory questions. For example: <em>Do women prefer a certain kind of coffee?</em> This is the kind of thing Excel, well, excels at, and it&rsquo;s often done using a tool called a Pivot Table.</p>

<p>Here&rsquo;s a table looking at the average number of regular, decaf, and mocha cups consumed by male and female patrons:</p>

<table>
	<tbody>
		<tr>
			<th>Row Labels</th>
			<th>Average of Regular</th>
			<th>Average of Decaf</th>
			<th>Average of Mocha</th>
		</tr>
		<tr>
			<td>F</td>
			<td>2.67</td>
			<td>0.33</td>
			<td>0.00</td>
		</tr>
		<tr>
			<td>M</td>
			<td>2.00</td>
			<td>1.75</td>
			<td>2.00</td>
		</tr>
		<tr class="custom extra-highlight">
			<td>Grand Total</td>
			<td>2.29</td>
			<td>1.14</td>
			<td>1.14</td>
		</tr>
	</tbody>
</table>

<p>Looking at this table, we can see a pretty clear trend: Women like regular; men seem evenly split across all three types of coffee<span data-type="footnote">There aren&rsquo;t enough data to make a statistically reliable statement like this. But this is all made-up data anyway, so stop thinking so much about coffee consumption.</span>.</p>

<p>The thing about these data, however, is they have still been <a class="glossterm" href="glossary01.html#aggregation" target="_blank">aggregated</a> somehow. We summarized the data along several dimensions&mdash;gender and coffee type&mdash;by aggregating them by the name of the patron. While this isn&rsquo;t the <a class="glossterm" href="glossary01.html#data-raw" target="_blank">raw data</a>, it&rsquo;s close.</p>

<p>One good thing about this summarization is that it keeps the dataset fairly small. It also suggests ways in which the data might be explored. It is pretty common to find survey data that looks like this: for example, a Google Form might output this kind of data from a survey that says:</p>

<figure><img alt="Google form" src="../images/sections/02/google-form.png" /></figure>

<p>Producing the following data in the Google spreadsheet:</p>

<table>
	<tbody>
		<tr>
			<th>Timestamp</th>
			<th>What is your name?</th>
			<th>Gender?</th>
			<th>Regular</th>
			<th>Decaf</th>
			<th>Mocha</th>
		</tr>
		<tr>
			<td>1/17/2014 11:12:47</td>
			<td>Bob Smith</td>
			<td>Male</td>
			<td> </td>
			<td>4</td>
			<td>3</td>
		</tr>
	</tbody>
</table>

<h3>Using Visualization to Reveal Underlying Variance</h3>

<p>When you have summary records or raw data, it&rsquo;s common to aggregate in order to display them easily. By showing the total coffee consumed (summing up the raw information) or the average number of cups per patron (the mean of the raw information) we make the data easier to understand.</p>

<p>Consider the following transactions:</p>

<table>
	<tbody>
		<tr>
			<th>Name</th>
			<th>Regular</th>
			<th>Decaf</th>
			<th>Mocha</th>
		</tr>
		<tr>
			<td>Bob Smith</td>
			<td>2</td>
			<td>3</td>
			<td>1</td>
		</tr>
		<tr>
			<td>Jane Doe</td>
			<td>4</td>
			<td>0</td>
			<td>0</td>
		</tr>
		<tr>
			<td>Dale Cooper</td>
			<td>1</td>
			<td>2</td>
			<td>4</td>
		</tr>
		<tr>
			<td>Mary Brewer</td>
			<td>3</td>
			<td>1</td>
			<td>0</td>
		</tr>
		<tr>
			<td>Betty Kona</td>
			<td>1</td>
			<td>0</td>
			<td>0</td>
		</tr>
		<tr>
			<td>John Java</td>
			<td>2</td>
			<td>1</td>
			<td>3</td>
		</tr>
		<tr>
			<td>Bill Bean</td>
			<td>3</td>
			<td>1</td>
			<td>0</td>
		</tr>
		<tr>
			<td>Jake Beatnik</td>
			<td>0</td>
			<td>0</td>
			<td>1</td>
		</tr>
		<tr class="custom extra-highlight">
			<td>Totals</td>
			<td>16</td>
			<td>8</td>
			<td>9</td>
		</tr>
		<tr class="custom extra-highlight">
			<td>Averages</td>
			<td>2</td>
			<td>1</td>
			<td>1.125</td>
		</tr>
	</tbody>
</table>

<p>We can show the average of each coffee type consumed by cup as a summary graphic:</p>

<figure><img alt="Average cups consumed" src="../images/sections/02/average-cups-consumed.png" /></figure>

<p>But averages hide things. Perhaps some people have a single cup of a particular type, and others have many. There are ways to visualize the spread, or variance, of data that indicate the underlying shape of the information, including heat charts, <a class="glossterm" href="glossary01.html#histogram" target="_blank">histograms</a>, and scatterplots. When keeping the underlying data, you can wind up with more than one <em>dependent</em> variable for each <em>independent</em> variable.</p>

<p>A better visualization (such as a histogram, which counts how many people fit into each bucket or range of values that made up an average) might reveal that a few people are drinking a lot of coffee, and a large number of people are drinking a small amount.</p>

<p>Consider this histogram of the number of cups per patron. All we did was tally up how many people had one cup, how many had two, how many had three, and so on. Then we plotted how <em>frequently</em> each number occurred, which is why this is called a <a class="glossterm" href="glossary01.html#frequency-histogram" target="_blank">frequency histogram</a>.</p>

<figure><img alt="Mean vs. Mode" src="../images/sections/02/mean-vs-mode.png" /></figure>

<p>The <em>average</em> number of cups in this dataset is roughly 3. And the <a class="glossterm" href="glossary01.html#mode" target="_blank">mode</a>, or most common number, is 2 cups. But as the histogram shows, there are three heavy coffee drinkers who&rsquo;ve each consumed 7 cups, pushing up the average.</p>

<p>In other words, when you have raw data, you can see the exceptions and outliers, and tell a more accurate story.</p>

<p>Even these data, verbose and informative as they are, aren&rsquo;t the raw information: they&rsquo;re still aggregated.</p>

<p>Aggregation happens in many ways. For example, a restaurant receipt usually aggregates orders by table. There&rsquo;s no way to find out what an individual person at the table had for dinner, just the food that was served and what it cost. To get to really specific exploration, however, we need data at the transaction level.</p>

<h2>Individual Transactions</h2>

<p><a class="glossterm" href="glossary01.html#record-transactional" target="_blank">Transactional records</a> capture things about a specific event. There&rsquo;s no aggregation of the data along any dimension like someone&rsquo;s name (though their name may be captured). It&rsquo;s not rolled up over time; it&rsquo;s instantaneous.</p>

<table>
	<tbody>
		<tr>
			<th>Timestamp</th>
			<th>Name</th>
			<th>Gender</th>
			<th>Coffee</th>
		</tr>
		<tr>
			<td>17:00</td>
			<td>Bob Smith</td>
			<td>M</td>
			<td>Regular</td>
		</tr>
		<tr>
			<td>17:01</td>
			<td>Jane Doe</td>
			<td>F</td>
			<td>Regular</td>
		</tr>
		<tr>
			<td>17:02</td>
			<td>Dale Cooper</td>
			<td>M</td>
			<td>Mocha</td>
		</tr>
		<tr>
			<td>17:03</td>
			<td>Mary Brewer</td>
			<td>F</td>
			<td>Decaf</td>
		</tr>
		<tr>
			<td>17:04</td>
			<td>Betty Kona</td>
			<td>F</td>
			<td>Regular</td>
		</tr>
		<tr>
			<td>17:05</td>
			<td>John Java</td>
			<td>M</td>
			<td>Regular</td>
		</tr>
		<tr>
			<td>17:06</td>
			<td>Bill Bean</td>
			<td>M</td>
			<td>Regular</td>
		</tr>
		<tr>
			<td>17:07</td>
			<td>Jake Beatnik</td>
			<td>M</td>
			<td>Mocha</td>
		</tr>
		<tr>
			<td>17:08</td>
			<td>Bob Smith</td>
			<td>M</td>
			<td>Regular</td>
		</tr>
		<tr>
			<td>17:09</td>
			<td>Jane Doe</td>
			<td>F</td>
			<td>Regular</td>
		</tr>
		<tr>
			<td>17:10</td>
			<td>Dale Cooper</td>
			<td>M</td>
			<td>Mocha</td>
		</tr>
		<tr>
			<td>17:11</td>
			<td>Mary Brewer</td>
			<td>F</td>
			<td>Regular</td>
		</tr>
		<tr>
			<td>17:12</td>
			<td>John Java</td>
			<td>M</td>
			<td>Decaf</td>
		</tr>
		<tr>
			<td>17:13</td>
			<td>Bill Bean</td>
			<td>M</td>
			<td>Regular</td>
		</tr>
	</tbody>
</table>

<p>These transactions can be aggregated by any column. They can be cross-referenced by those columns. The timestamps can also be aggregated into buckets (hourly, daily, or annually). Ultimately, the initial dataset we saw of coffee consumption per year results from these raw data, although summarized significantly.</p>

<h2>Deciding How to Aggregate</h2>

<p>When we roll up data into buckets, or transform it somehow, we take away the raw history. For example, when we turned raw transactions into annual totals:</p>

<ul>
	<li>We anonymized the data by removing the names of patrons when we aggregated it.</li>
	<li>We bucketed timestamps, summarizing by year.</li>
</ul>

<p>Either of these pieces of data could have shown us that someone was a heavy coffee drinker (based on total coffee consumed by one person, or based on the rate of consumption from timestamps). While we might not think about the implications of our data on coffee consumption, what if the data pertained instead to alcohol consumption? Would we have a moral obligation to warn someone if we saw that a particular person habitually drank a lot of <em>alcohol</em>? What if this person killed someone while driving drunk? Are data about alcohol consumption subject to legal discovery in a way that data about coffee consumption needn&rsquo;t be? Are we <em>allowed</em> to aggregate some kinds of data but not others?</p>

<div data-type="example">
  <h4>Can we address the inherent biases that result from choosing how we aggregate data before presenting it?</h4>
<p> The big data movement is going to address some of this. Once, it was too computationally intensive to store all the raw transactions. We had to decide how to aggregate things at the moment of collection, and throw out the raw information. But advances in storage efficiency, parallel processing, and cloud computing are making on-the-fly aggregation of massive datasets a reality, which should overcome some amount of <a class="glossterm" href="glossary01.html#bias-aggregation" target="_blank">aggregation bias</a>.</p>
</div>
</section>
</section>
